
<%--
  Created by IntelliJ IDEA.
  User: Administrator
  Date: 2018/6/3
  Time: 17:16
  To change this template use File | Settings | File Templates.
--%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>

<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>

<html>
<head>
    <title>薪酬收入</title>
    <link rel="stylesheet" href="${pageContext.request.contextPath }/Css/writer_all.css" type="text/css" >
    <link rel="stylesheet" href="${pageContext.request.contextPath }/Css/writer_income.css" type="text/css">

</head>
<body style="background: #efefef">
<div></div>
<div class="all">
    <div class="head">
        <div class="title">
            <a href="${pageContext.request.contextPath}/JSP/writer_home.jsp"><span class="title1">惊鸿·</span><span class="title2">作家专区</span></a>
        </div>
        <div  class="notify">
            <a href=""><img id="notify" class="img1" src="${pageContext.request.contextPath}/${LoginWriter.writerPortrait}"><span class="notify1">个人中心</span></a>
        </div>
        <div id="float_div" class="float_div">
            <div class="arrow"></div>
            <span class="float_span">作家资料</span>
            <span class="float_span">更改密码</span>
            <span class="float_span" style="border: none">退出登录</span>
        </div>
    </div>
    <div class="main">
        <div class="All_label">
            <a href="${pageContext.request.contextPath}/JSP/writer_home.jsp"><div class="son_label">
                <span class="label_span">专 区 首 页</span>
            </div></a>
            <a href="${pageContext.request.contextPath}/Writer/WriterNovels.action" ><div class="son_label">
                <span class="label_span">作 品 管 理</span>
            </div></a>
            <a href="${pageContext.request.contextPath}/Writer/WriterDate.action" ><div class="son_label">
                <span class="label_span">数 据 统 计</span>
            </div></a>
            <a href="${pageContext.request.contextPath}/Writer/WriterIncome.action" ><div class="son_label_choosed">
                <span class="label_span_choosed">稿 酬 收 入</span>
            </div></a>
            <a href="${pageContext.request.contextPath}/Writer/WriterQuestion.action" ><div class="son_label">
                <span class="label_span">作 家 咨 询</span>
            </div></a>
        </div>
        <div class="context">
            <div class="context_title">&nbsp;稿酬收入</div>
            <div class="context_summary">
                <a id="allincome" href="#"><span class="choosed">总收入</span></a>
                <a id="readincome" href="#" onclick="change()"><span class="choosed">订阅收入</span></a>
                <a id="rewardincome" href="#" onclick="change()"><span class="choosed">打赏收入</span></a>
            </div>

            <div id="allincome1" class="allincome">
                <form method="post" name="findform">
                <span class="find_span">查看方式：</span>
                <select id="findtype" name="findtype" class="findtype">
                    <option id="choosed_data" value="date" selected="selected">按月份</option>
                    <option id="choosed_works" value="works">按作品</option>
                </select>
                <div id="div_findtype1" class="div_findtype1">
                    <select name="findyear" class="findyear">
                        <option >——</option>
                        <option value="2013" >2013</option>
                        <option value="2014" >2014</option>
                        <option value="2015" >2015</option>
                        <option value="2016" >2016</option>
                        <option value="2017" >2017</option>
                        <option value="2018" >2018</option>
                    </select>
                    <select name="findmonth" class="findmonth">
                        <option>——</option>
                        <option value="01" >1</option>
                        <option value="02" >2</option>
                        <option value="03" >3</option>
                        <option value="04" >4</option>
                        <option value="05" >5</option>
                        <option value="06" >6</option>
                        <option value="07" >7</option>
                        <option value="08" >8</option>
                        <option value="09" >9</option>
                        <option value="10" >10</option>
                        <option value="11" >11</option>
                        <option value="12" >12</option>
                    </select>
                    <button id="find1" type="submit" class="find1" name="find1">查看</button>
                </div>
                <div id="div_findtype2" class="div_findtype2">
                    <select name="findnovels" class="findnovels">
                        <option>——</option>
                        <c:forEach var="book" items="${bookList }">
                            <option value="${book.bookId }">${book.bookName}</option>
                        </c:forEach>
                    </select>
                    <button id="find2" class="find2" name="find2" type="submit">查看</button>
                </div>
                </form>
                <div>合计收入:${AllIncome }</div>
                <div class="detail1">
                    <span class="detail_span">收入明细</span>
                    <table class="table1" cellpadding="0" cellspacing="0">
                        <tr class="tr1">
                            <th class="th1">订单号</th>
                            <th class="th1">作品</th>
                            <th class="th1">类型</th>
                            <th class="th1">读者</th>
                            <th class="th1">金额</th>
                            <th class="th1">订单时间</th>
                        </tr>
                        <c:if test="${empty AllOrder}">
                            <tr class="tr1">
                                <td colspan="5">暂无任何结果</td>
                            </tr>
                        </c:if>
                        <c:if test="${not empty AllOrder}">
                            <c:forEach var="order" items="${AllOrder }">
                                <tr class="tr1">
                                    <td>${order.readerOrderId}</td>
                                    <td>${order.bookName}</td>
                                    <td>${order.orderTypeName}</td>
                                    <td>${order.readerNeckName}</td>
                                    <td>${order.readerOrderPrice}</td>
                                    <td><fmt:formatDate value="${order.readerOrderTime}" type="both" pattern="yyyy-MM-dd HH:mm:ss"/></td>
                                <%--<fmt:formatDate value="${order.readerOrderTime}" type="date" pattern="yyyy-MM-dd hh:mm:ss"/>--%>
                                </tr>
                            </c:forEach>
                        </c:if>
                    </table>
                </div>
            </div>
            <div id="readincome1" class="readincome">

            </div>
            <div id="rewardincome1" class="rewardincome">

            </div>
        </div>
    </div>

</div>
<script type="text/javascript">
    document.getElementById("allincome").onclick = function () {
        document.getElementById("allincome1").style.display = 'block';
        document.getElementById("readincome1").style.display = "none";
        document.getElementById("rewardincome1").style.display = "none";
    }
    document.getElementById("readincome").onclick = function () {
        document.getElementById("allincome1").style.display = 'none';
        document.getElementById("readincome1").style.display = "block";
        document.getElementById("rewardincome1").style.display = "none";
    }
    document.getElementById("rewardincome").onclick = function () {
        document.getElementById("allincome1").style.display = 'none';
        document.getElementById("readincome1").style.display = "none";
        document.getElementById("rewardincome1").style.display = "block";
    }
    document.getElementById("findtype").onchange = function () {
        var sel = document.getElementById("findtype").value;
        if(sel == "date"){
            document.getElementById("div_findtype1").style.display = "block";
            document.getElementById("div_findtype2").style.display = "none";
        }
        else {
            document.getElementById("div_findtype1").style.display = "none";
            document.getElementById("div_findtype2").style.display = "block";
        }

    }
    /*document.getElementById("choosed_works").onclick = function () {
        document.getElementById("div_findtype1").style.display = "none";
        document.getElementById("div_findtype2").style.display = "block";
    }*/


</script>

<script type="text/javascript">
    document.getElementById("notify").onmouseover = function () {
        document.getElementById("float_div").style.display = "block";
    }
    document.getElementById("notify").onmouseout = function () {
        document.getElementById("float_div").style.display = "none";
    }
</script>
<script type="text/javascript">
    document.getElementById("find1").onclick = function () {
            document.findform.action = "${pageContext.request.contextPath}/Writer/WriterIncomeDetail1.action";
            document.findform.submit();
    }
    document.getElementById("find2").onclick = function () {
        document.findform.action = "${pageContext.request.contextPath}/Writer/WriterIncomeDetail2.action";
        document.findform.submit();
    }
</script>

</body>
</html>