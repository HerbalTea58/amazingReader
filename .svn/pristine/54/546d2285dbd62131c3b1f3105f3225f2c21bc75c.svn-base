<%--
  Created by IntelliJ IDEA.
  User: Administrator
  Date: 2018/6/12
  Time: 14:47
  To change this template use File | Settings | File Templates.
--%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>

<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>

<html>
<head>
    <title>创建新书</title>
    <link rel="stylesheet" href="${pageContext.request.contextPath }/Css/writer_all.css" type="text/css" >
    <link rel="stylesheet" href="${pageContext.request.contextPath }/Css/writer_addBook.css" type="text/css">

    <%
        String path = request.getContextPath();
        String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";
    %>

</head>
<body>
<div></div>
<div class="all">
    <div class="head">
        <div class="title">
            <a href="${pageContext.request.contextPath}/JSP/writer_home.jsp"><span class="title1">惊鸿·</span><span class="title2">作家专区</span></a>
        </div>
        <div  class="notify">
            <a href=""><img id="notify" class="img1" src="${pageContext.request.contextPath}/${LoginWriter.writerPortrait}"><span class="notify1">个人中心</span></a>
        </div>
        <div id="float_div" class="float_div">
            <div class="arrow"></div>
            <span class="float_span">作家资料</span>
            <span class="float_span">更改密码</span>
            <span class="float_span" style="border: none">退出登录</span>
        </div>
    </div>
    <div class="main">
        <div class="All_label">
            <a href="${pageContext.request.contextPath}/JSP/writer_home.jsp"><div class="son_label">
                <span class="label_span">专 区 首 页</span>
            </div></a>
            <a href="${pageContext.request.contextPath}/Writer/WriterNovels.action" ><div class="son_label_choosed">
                <span class="label_span_choosed">作 品 管 理</span>
            </div></a>
            <a href="${pageContext.request.contextPath}/Writer/WriterDate.action" ><div class="son_label">
                <span class="label_span">数 据 统 计</span>
            </div></a>
            <a href="${pageContext.request.contextPath}/Writer/WriterIncome.action" ><div class="son_label">
                <span class="label_span">稿 酬 收 入</span>
            </div></a>
            <a href="${pageContext.request.contextPath}/Writer/WriterQuestion.action" ><div class="son_label">
                <span class="label_span">作 家 咨 询</span>
            </div></a>
        </div>
        <div class="context">
            <div class="context_title">&nbsp;作品管理
                <div class="context_title1">&nbsp;作品创建</div>
            </div>
            <form action="${pageContext.request.contextPath}/Writer/WriterAddNewNovel.action" method="post">
                <span class="span1">作品名称</span>
                <input class="input1" name="name" />
                <span class="span2">目标读者</span>
                <input id="radio1" class="radio1" type="radio"  name="sex" value="male" /><label class="label1">男生</label>
                <input id="radio2" class="radio2" type="radio"  name="sex" value="female"/><label class="label2">女生</label>
                <span class="span3">作品类型</span>
                <select id="select11" class="select11">
                    <option>— —</option>
                    <c:forEach var="male" items="${MaleList}">
                        <option value="${male.bookStyleId}">${male.bookStyleName}</option>
                    </c:forEach>
                </select>
                <select id="select12"  class="select12">
                    <option>— —</option>
                    <c:forEach var="female" items="${FemaleList}">
                        <option value="${female.bookStyleId}">${female.bookStyleName}</option>
                    </c:forEach>
                </select>
                <select id="select2" class="select2" name="bookstyle">
                    <option>— —</option>
                </select>
                <span class="span4">作品标签</span>
                <input class="input_label1"/>
                <input class="input_label2"/>
                <input class="input_label3"/>
                <input class="input_label4"/>
                <input class="input_label5"/>
                <span class="span5">推荐语</span>
                <input type="text" class="input5" name="recommend"/>
                <span class="span6">作品简介</span>
                <textarea name="introduction" type="text" class="input6"></textarea>
                <button type="submit" id="submit" class="submit">创建新书</button>
            </form>


        </div>
    </div>

</div>

<script type="text/javascript">
    document.getElementById("notify").onmouseover = function () {
        document.getElementById("float_div").style.display = "block";
    }
    document.getElementById("notify").onmouseout = function () {
        document.getElementById("float_div").style.display = "none";
    }
</script>
<script type="text/javascript">
    document.getElementById("radio1").onclick = function () {
        document.getElementById("select11").style.display = "block";
        document.getElementById("select12").style.display = "none";
    }
    document.getElementById("radio2").onclick = function () {
        document.getElementById("select11").style.display = "none";
        document.getElementById("select12").style.display = "block";
    }
</script>
<script src="${pageContext.request.contextPath}/jquery-1.11.2.js"></script>
<script type="text/javascript">
    document.getElementById("select11").onchange = function () {
        var sel = document.getElementById("select11").value;
        var select2 = document.getElementById("select2");
        var length = select2.options.length;
        for(var j=length; j>0 ; j--){
            select2.options.remove(j);
        }
       $.ajax({
            type: "POST",
            url: '${pageContext.request.contextPath}/Writer/selectStyle.action',
            data: {
                "styleId":sel
            },
            DataType: "json",
            success: function (list) {
                var select = document.getElementById("select2");
                for(var i=0; i<=list.length; i++){
                    // alert(list[i].bookStyleId + "jdfosifjoe"+ list[i].bookStyleName);
                    select.options.add(new Option(list[i].bookStyleName, list[i].bookStyleId));
                }
            },
            error:function(){
                alert("失败");
            }
        });
    }
</script>
<script type="text/javascript">
    document.getElementById("select12").onchange = function () {
        var sel = document.getElementById("select12").value;
        var select2 = document.getElementById("select2");
        var length = select2.options.length;
        for(var j=length; j>0 ; j--){
            select2.options.remove(j);
        }
        $.ajax({
            type: "POST",
            url: '${pageContext.request.contextPath}/Writer/selectStyle.action',
            data: {
                "styleId":sel
            },
            DataType: "json",
            success: function (list) {
                var select = document.getElementById("select2");
                for(var i=0; i<=list.length; i++){
                    alert(list[i].bookStyleId + "jdfosifjoe"+ list[i].bookStyleName);
                    select.options.add(new Option(list[i].bookStyleName, list[i].bookStyleId));
                }
            },
            error:function(){
                alert("失败");
            }
        });
    }
</script>
</body>
</html>
